<HTML>
<HEAD>
<script type="text/javascript" language="javascript">
	function change_help(text){
		document.getElementById("help_text").innerHTML = text;
	}

	function hide_show_perm(testtype){
	        var num_permut_box  = "<input type=\"text\" name=\"num_permut\" size = \"15\" value = 200000 maxlength =\"10\"> "
		var paired_file_box = "<input type=\"FILE\" name=\"paired_indicator\" size = \"25\" maxlength =\"200\">"
		if (testtype.value=="t" || testtype.value == "Anova" || testtype.value=="Regres"){
		document.getElementById("Permutation_box").innerHTML  = num_permut_box
		document.getElementById("Permutation_text").innerHTML = "Number of permutations"	
		}
		else if (testtype.value=="t_limma_paired"){
		document.getElementById("Permutation_box").innerHTML  = paired_file_box
		document.getElementById("Permutation_text").innerHTML = "Paired indicator file"
		}
		else{
		document.getElementById("Permutation_box").innerHTML  = ""
		document.getElementById("Permutation_text").innerHTML = "Non-permutation test"
		}
		
	}

	function toggle_help(){
	        var toggled_text
	        var permut_text = document.getElementById("Permutation_text").innerHTML
		if (permut_text =="Paired indicator file"){
			toggled_text = "Paired indicator file: Text file identical to class labels but with pairs of integers in the positions where the paired subjects are."}
		else if (permut_text =="Non-permutation test"){
			toggled_text="The test you have chosen does not use random permutations"}
		else {
			toggled_text = "Number of permutations for the statistical tests. The minimum value allowed is 1000." }
		return (toggled_text)
	}

	function help_text(case_text){
		var text
		switch(case_text){
			case 0:
				text = "Move mouse over item to get added information or click <a href=\"./help/pomelo2-help.html\" target=\"help_win\">here</a> for the long help file. See <a href=\"./help/flash_tutorials/video_tutorials.html\" target=\"video_win\">VIDEO TUTORIALS</a>."
				break;
			case 1:
				text = "Upload your data files."
				break;
			case 2:
				text = "Choose the type of test you wish to run and the number of permutations."
				break;
			case 3:
				text = "Choose the appropriate options to be able to show gene information from the databases used by IDConverter."
				break;
			case 4:
				text = "Expression data: tab-separated text file with genes in rows and a first column of identifiers."
				break;
			case 5:
				text = "Class label (t, Anova) or continuous dependent variables (regression, Cox model)."
				break;
			case 6:
				text = "Censored indicator. 1: non-censored (death observed), 0: censored."
				break;
			case 7:
				text = "Launch Pomelo II"
				break;	
			case 8:
				text = "Select test"
				break;
			case 9:
				text = toggle_help();
				break;
			case 10:
				text = "Type of gene ID"
				break;
			case 11:
				text = "Organism"
				break;	
		}

		change_help(text)
	}
	function getArgs(  ) {
	    var args = new Object(  );
	    var query = location.search.substring(1);      // Get query string
	    var pairs = query.split("&");                  // Break at &
	    for(var i = 0; i < pairs.length; i++) {
	        var pos = pairs[i].indexOf('=');          // Look for "name=value"
	        if (pos == -1) continue;                  // If not found, skip
	        var argname = pairs[i].substring(0,pos);  // Extract the name
	        var value = pairs[i].substring(pos+1);    // Extract the value
	        args[argname] = unescape(value);          // Store as a property
       						  // In JavaScript 1.5, use decodeURIComponent(  ) 
					          // instead of escape(  )
    	    }
	    return args;     // Return the object
	}	

</script>
<style type="text/css">
	DIV.Main_title
	{
		VERTICAL-ALIGN: middle;
		FONT-WEIGHT: 900; 
		FONT-SIZE: 2em;
		TEXT-ALIGN: center;
		BORDER-RIGHT: rgb(34,139,34) 7px solid;
		BORDER-TOP: rgb(0,139,0) 7px solid;
		BORDER-BOTTOM: rgb(34,139,34) 7px solid;
		BORDER-LEFT: rgb(0,139,0) 7px solid;
		PADDING-RIGHT: 7px;		
		PADDING-LEFT: 7px;
		PADDING-BOTTOM: 7px;
		PADDING-TOP: 7px;
		LEFT: 0.87%;
		TOP: 1%;
		FLOAT: none;
		MARGIN: 2px;
		POSITION: relative;
		BACKGROUND-COLOR: rgb(154,205,50); 
		WIDTH: 96%;
		HEIGHT: 4.4em;
	}
	DIV.Help_box
	{
		BORDER-RIGHT: rgb(34,139,34) 3px solid;
		BORDER-TOP: rgb(0,139,0) 3px solid;
		BORDER-BOTTOM: rgb(34,139,34) 3px solid;
		BORDER-LEFT: rgb(0,139,0) 3px solid;
		PADDING-RIGHT: 3px;		
		PADDING-LEFT: 3px;
		PADDING-BOTTOM: 3px;
		PADDING-TOP: 3px;
		LEFT: 0.4%;
		TOP: 2.5em;
		FLOAT: none;
		VISIBILITY: visible;
		MARGIN: 2px;
		POSITION: relative;
		BACKGROUND-COLOR: rgb(238,243,226);
		WIDTH: 98%;
		HEIGHT: 5%; 
	
	}
	DIV.Title_box
	{
		font-weight: bold; 
		TEXT-ALIGN: center;
		BORDER-RIGHT: rgb(34,139,34) 3px solid;
		BORDER-TOP: rgb(0,139,0) 3px solid;
		BORDER-BOTTOM: rgb(34,139,34) 3px solid;
		BORDER-LEFT: rgb(0,139,0) 3px solid;
		PADDING-RIGHT: 3px;		
		PADDING-LEFT: 3px;
		PADDING-BOTTOM: 3px;
		PADDING-TOP: 3px;
		LEFT: 6.5%;
		TOP: 1.1em;
		FLOAT: none;
		VISIBILITY: visible;
		MARGIN: 2px;
		POSITION: relative;
		BACKGROUND-COLOR: rgb(154,205,50); 
		WIDTH: 10em;
		Z-INDEX:2;
		
	}
	DIV.form_box
	{
		BORDER-RIGHT: rgb(34,139,34) 3px solid;
		BORDER-TOP: rgb(0,139,0) 3px solid;
		BORDER-BOTTOM: rgb(34,139,34) 3px solid;
		BORDER-LEFT: rgb(0,139,0) 3px solid;
		PADDING-RIGHT: 3px;		
		PADDING-LEFT: 3px;
		PADDING-BOTTOM: 3px;
		PADDING-TOP: 3px;
		LEFT: 8%;
		TOP: 0.3em;
		FLOAT: none;
		VISIBILITY: visible;
		MARGIN: 2px;
		POSITION: relative;
		BACKGROUND-COLOR: rgb(238,243,226);
		WIDTH: 85%;
		Z-INDEX:1;
	}


</style>

<TITLE> POMELO II </TITLE>
</HEAD>
<BODY background="fondo3.jpg">
  <FORM action="/cgi-bin/pomeloII.cgi" enctype="multipart/form-data" method="POST">
    
    <div id = "titulo_upload" class="Main_title">
      <img SRC="pomelo2.gif" align=left border=0>
      <img SRC="pomelo2.gif" align=right border=0>
      <span style="position:relative; top:15%">
	POMELO II <br>
	(THE RETURN OF THE POMELO)
      </span >
    </div>
    <div id = "titulo_upload" class="Title_box" onMouseOver="help_text(1)" onMouseOut = "help_text(0)">
      UPLOAD DATA 
    </div>
    
    <div id = "formulario_upload" class="form_box" >
      <table style="position:relative; left:10% ;top:0.7em; width:80%" >
	<tr onMouseOver="help_text(4)" onMouseOut = "help_text(0)">
	  <td> Expression data file</td> <td>
	    <script Language="Javascript">
	      var args = getArgs();
	      if (args.datadir) {
	      document.write("<span style=\"color: red\">Expression Data from <i>pre</i>P</b></span><input type=\"hidden\" value =" + args.datadir + "  name=\"covariate2\">");
              } else if (args.covarex) {
              document.write("<span style=\"color: red\">Expression Data from Example " + args.covarex + "</span><input type=\"hidden\" value =" + args.covarex + "  name=\"covarex\">");
              }  else {
              document.write("<input type=\"FILE\" name=\"covariate\" size = \"40\" maxlength =\"200\">");
              }
</script>
</td>
</tr>

<tr onMouseOver="help_text(5)" onMouseOut = "help_text(0)" >
  <td>Class labels or dependent variable</td><td>
    <script Language="Javascript">
      var args = getArgs();
      if (args.classex) {
      document.write("<span style=\"color: red\">Class Data from Example " + args.classex + "</span><input type=\"hidden\" value =" + args.classex + "  name=\"classex\">");
      }  else {
      document.write("<input type=\"FILE\" name=\"class_labels\" size = \"40\" maxlength =\"200\">");
      }
    </script>
    <!--    <input type="FILE" name="class_labels" size = "40" maxlength ="200"></td> -->
  </td>
</tr>
<tr onMouseOver="help_text(6)" onMouseOut = "help_text(0)">
  <td>Censored indicator</td><td>
    <script Language="Javascript">
      var args = getArgs();
      if (args.censoredex) {
      document.write("<span style=\"color: red\">Censored Indicator from Example " + args.censoredex + "</span><input type=\"hidden\" value =" + args.censoredex + "  name=\"censoredex\">");
      }  else {
      document.write("<input type=\"FILE\" name=\"censored_indicator\" size = \"40\" maxlength =\"200\">");
      }
</script>
<!-- <input type="FILE" name="censored_indicator" size = "40" maxlength --
  -- ="200"></td> -->
</td>
  
</table>
<br>
</div>




<div id = "titulo_test_opt" class="Title_box" onMouseOver="help_text(2)" onMouseOut = "help_text(0)">
  TEST OPTIONS
</div>

<div id = "formulario_test_opt" class="form_box" >
  <table style="position:relative; left:10% ;top:0.7em; width:80%">
    <tr>
      <td style="width:10%" onMouseOver="help_text(8)" onMouseOut = "help_text(0)">
	Select test
      </td>
      <td style="width:20%" onMouseOver="help_text(8)" onMouseOut = "help_text(0)">
	<SELECT NAME="testtype" SIZE="1" onChange="hide_show_perm(testtype)">
	  <OPTION VALUE="t" DEFAULT=TRUE>t-test (Permutations)</OPTION>
	  <OPTION VALUE="Anova"> Anova (Permutations)</OPTION>
	  <OPTION VALUE="Regres"> Regression (Permutations)</OPTION>
	  <OPTION VALUE="FisherIxJ">Fisher IxJ</OPTION>
	  <OPTION VALUE="Cox"> Cox model</OPTION>
	  <OPTION VALUE="t_limma">t-test (limma)</OPTION>
	  <OPTION VALUE="t_limma_paired">Paired t-test (limma)</OPTION>
	  <OPTION VALUE="Anova_limma"> Anova, linear models (limma)</OPTION>   
	</SELECT>
      </td>
      <td style="width:20%" onMouseOver="help_text(9)" onMouseOut = "help_text(0)">
	<div id = "Permutation_text">
	  Number of permutations
      </td>
      
      <td style="width:20%" onMouseOver="help_text(9)" onMouseOut = "help_text(0)">
	<div id = "Permutation_box">
	  <input type="text" name="num_permut" size = "15" value = 200000 maxlength ="10"> 
	</div>			
      </td>
      
    </tr>
  </table>
  <BR>
  </div>
  
  <div id = "titulo_idconv" class="Title_box" onMouseOver="help_text(3)" onMouseOut = "help_text(0)">
    ID CONVERTER INFORMATION
  </div>
  
  <div id = "formulario_idconv" class="form_box" >
		<table style="position:relative ;left:10% ;top:0.7em ;width:80%">
		<tr>
			<td onMouseOver="help_text(10)" onMouseOut = "help_text(0)">
				Type of ID for gene names
			</td>
			<td onMouseOver="help_text(10)" onMouseOut = "help_text(0)">
				<SELECT NAME="idtype" SIZE="1">
				  <OPTION VALUE="None" DEFAULT=TRUE>None</OPTION>
				  <OPTION VALUE="affy">Affymetrix ID</OPTION>
				  <OPTION VALUE="clone"> Clone ID (IMAGE Consortium)</OPTION>
				  <OPTION VALUE="acc"> GenBank Accession</OPTION>
				  <OPTION VALUE="ensembl">  Ensembl Gene</OPTION>
				  <OPTION VALUE="ug">  Unigene cluster</OPTION>
				  <OPTION VALUE="entrez">  Entrez Gene</OPTION>
				  <OPTION VALUE="cnio"> CNIO ID </OPTION>
				  <OPTION VALUE="swissp">  SwissProt name </OPTION>
				  <OPTION VALUE="rsdna">  RefSeq_DNA </OPTION>
				  <OPTION VALUE="rspep"> RefSeq_peptide </OPTION>
				  <OPTION VALUE="hugo"> HUGO Gene Name </OPTION>
				</SELECT>
			</td>
			<td onMouseOver="help_text(11)" onMouseOut = "help_text(0)">
				Organism
			</td>
			<td onMouseOver="help_text(11)" onMouseOut = "help_text(0)">
				<SELECT NAME="organism" SIZE="1">
				  <OPTION VALUE="None" DEFAULT=TRUE>None</OPTION>
				  <OPTION VALUE="Rn"> Rat (Rattus norvegicus)</OPTION>
				  <OPTION VALUE="Mm"> Mouse (Mus musculus)</OPTION>
				  <OPTION VALUE="Hs"> Human (Homo sapiens)</OPTION>
				</SELECT>
			</td>
		</tr>
		</table>
		<br>
	</div>
<br>
<center>


<!-- I think I do not need JS, but I can't do it otherwise. -->
  <script Language="Javascript">
    var args = getArgs();
    if (args.add_covars_ex) {
      document.write("<input type=\"hidden\" value =" + args.add_covars_ex + "  name=\"add_covars_ex\">");
    }
</script>


<!-- <input type="hidden" name="add_covars_ex" value=add_covars_ex> -->


	<input value="Start Pomelo II" type = "SUBMIT" onMouseOver="help_text(7)" onMouseOut = "help_text(0)">
</center>
	<div id = "formulario_idconv" class="Help_box">
		<SPAN style="FONT-WEIGHT: 900; FONT-SIZE: 2em; ">&nbsp;?&nbsp;</SPAN> 
		<SPAN style="position:absolute; top:30%; font-size:small ;FONT-WEIGHT: 100;">
			<div id = "help_text" >
				Move mouse over item to get added information or click <a href="./help/pomelo2-help.html" target="help_win">here</a> for the long help file. See
				<a href="./help/flash_tutorials/video_tutorials.html" target="video_win">VIDEO TUTORIALS</a>.
			</div>
		</SPAN>
	</div>
</FORM>

<div style="position:relative;top:2.2em">
<p><font size=2>Pomelo II has been developed by <a href="mailto:e.r.morrissey@warwick.ac.uk"><b>Edward R. Morrissey</b></a>, currently at the University of Warwick, and <a href="http://ligarto.org/rdiaz"><b>Ramon Diaz-Uriarte</b></a>, at CNIO.
				</font></p>

	<table border=0 width="100%" celllspacing=0>
		<tr>
			<td align=left>
			</tr>
			<tr></tr>
			<tr>
			<TD align="right" width="200"><a
		href="http://asterias.bioinfo.cnio.es"><img
		src="asterias_app.png" width="200" height="40"
		border="0"></a></td>

		
			<td align="left"><p><font size=2><b><a
			href="http://asterias.bioinfo.cnio.es">Asterias</a></b>,
			a parallelized, web-based suite for the analysis
			of genomic data, includes applications for class
			prediction, normalization, survival analysis,
			aCGH, etc. </font></p>
<!-- 			  See further details in the paper in <a -->
<!-- 			href="http://nar.oxfordjournals.org/cgi/content/abstract/35/suppl_2/W75">NAR</a></font></p> -->

			</td>
</tr>
	</table>
</div>
</BODY>
</HTML>
